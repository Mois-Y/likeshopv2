(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order_details-order_details"],{"19ea":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* pages/order_details/order_details.wxss */.order-details[data-v-139406d5]{position:relative;padding-bottom:calc(%?120?% + env(safe-area-inset-bottom))}.order-details .header-bg[data-v-139406d5]{position:absolute;top:0;width:100%;height:%?200?%;background-color:#ff2c3c;z-index:0}.order-details .main[data-v-139406d5]{position:relative;z-index:1}.order-details .contain[data-v-139406d5]{margin:0 %?20?% %?20?%;border-radius:%?14?%;background-color:#fff}.order-details .header[data-v-139406d5]{padding:%?24?% %?40?%;box-sizing:border-box}.order-details .header .van-count-down[data-v-139406d5]{color:#fff;margin:0 %?10?%}.order-details .img-line[data-v-139406d5]{height:1.5px;width:100%;display:block}.order-details .address-wrap[data-v-139406d5]{height:%?164?%;padding:0 %?24?%}.order-details .order-info[data-v-139406d5]{padding:%?12?% 0}.order-details .order-info .item[data-v-139406d5]{padding:%?12?% %?24?%}.order-details .order-info .item .title[data-v-139406d5]{width:%?180?%;-webkit-box-flex:0;-webkit-flex:none;flex:none}.order-details .price > uni-view[data-v-139406d5]{height:%?60?%;padding:0 %?24?%}.order-details .footer[data-v-139406d5]{position:fixed;bottom:0;left:0;right:0;height:%?100?%;padding:0 %?24?%}.footer .plain[data-v-139406d5]{border:1px solid #bbb}.footer .plain.red[data-v-139406d5]{border:1px solid var(--primary-color)}.tips-dialog[data-v-139406d5]{height:%?230?%;width:100%}.order-details .invite-btn[data-v-139406d5]{background:-webkit-linear-gradient(right,#ff2c3c,#f95f2f);background:linear-gradient(270deg,#ff2c3c,#f95f2f);margin:%?30?% %?26?% %?40?%}',""]),t.exports=e},"2b6c":function(t,e,i){var a=i("58e6");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=i("4f06").default;r("582a72a3",a,!0,{sourceMap:!1,shadowMode:!1})},"322b":function(t,e,i){"use strict";var a=i("2b6c"),r=i.n(a);r.a},"58e6":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".loading[data-v-5027cfe8]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff}.loading.flex[data-v-5027cfe8]{position:static;-webkit-box-flex:1;-webkit-flex:1;flex:1;width:100%}",""]),t.exports=e},"5e7b":function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={loading:i("b5bb").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:"loading "+("flex"==t.type?"flex":""),style:{backgroundColor:t.backgroundColor}},[i("loading",{attrs:{color:t.color,size:t.size}})],1)},s=[]},6097:function(t,e,i){var a=i("19ea");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=i("4f06").default;r("23d369e4",a,!0,{sourceMap:!1,shadowMode:!1})},"7f4f":function(t,e,i){"use strict";i.r(e);var a=i("d66c"),r=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=r.a},"899b":function(t,e,i){"use strict";i.r(e);var a=i("fedb"),r=i("a6403");for(var s in r)"default"!==s&&function(t){i.d(e,t,(function(){return r[t]}))}(s);i("b1f4");var n,o=i("f0c5"),d=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"139406d5",null,!1,a["a"],n);e["default"]=d.exports},a6403:function(t,e,i){"use strict";i.r(e);var a=i("ff44"),r=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=r.a},b1f4:function(t,e,i){"use strict";var a=i("6097"),r=i.n(a);r.a},d66c:function(t,e,i){"use strict";i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{}},props:{type:{type:String,default:"fixed"},backgroundColor:{type:String},color:{type:String},size:{type:Number,default:40}},methods:{}};e.default=a},e2e2:function(t,e,i){"use strict";i.r(e);var a=i("5e7b"),r=i("7f4f");for(var s in r)"default"!==s&&function(t){i.d(e,t,(function(){return r[t]}))}(s);i("322b");var n,o=i("f0c5"),d=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"5027cfe8",null,!1,a["a"],n);e["default"]=d.exports},fedb:function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={orderGoods:i("48d2").default,priceFormat:i("e5c9").default,loadingView:i("e2e2").default,orderDialog:i("ea04").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"order-details"},[i("v-uni-view",{staticClass:"header-bg"}),i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"header"},[0==t.orderDetail.order_status?i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"white lg mb10"},[t._v("等待买家付款")])],1):t._e(),1==t.orderDetail.order_status?i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"white lg mb10"},[t._v("等待商家发货")]),i("v-uni-view",{staticClass:"white sm"},[t._v("您的商品正在打包中，请耐心等待…")])],1):t._e(),2==t.orderDetail.order_status?i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"white lg mb10"},[t._v("已发货")]),i("v-uni-view",{staticClass:"white sm"},[t._v("您的商品正在路中，请耐心等待…")])],1):t._e(),3==t.orderDetail.order_status?i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"white lg mb10"},[t._v("已完成")]),i("v-uni-view",{staticClass:"white sm"},[t._v("商品已签收，期待再次购买！")])],1):t._e(),4==t.orderDetail.order_status?i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"white lg mb10"},[t._v("订单已关闭")])],1):t._e()],1),i("v-uni-view",{staticClass:"address-wrap row contain"},[i("v-uni-image",{staticClass:"icon-md mr20",attrs:{src:"/static/images/icon_address.png"}}),i("v-uni-view",{staticClass:"address"},[i("v-uni-view",[i("v-uni-text",{staticClass:"name md mr10"},[t._v(t._s(t.orderDetail.consignee))]),i("v-uni-text",{staticClass:"phone md"},[t._v(t._s(t.orderDetail.mobile))]),i("v-uni-view",{staticClass:"area sm mt10 lighter"},[t._v(t._s(t.orderDetail.delivery_address))])],1)],1)],1),i("v-uni-view",{staticClass:"goods contain"},[i("order-goods",{attrs:{"show-comment":t.orderDetail.comment_btn,link:"true",list:t.orderDetail.order_goods}})],1),i("v-uni-view",{staticClass:"price contain"},[i("v-uni-view",{staticClass:"row-between"},[i("v-uni-view",[t._v("商品金额")]),i("v-uni-view",{staticClass:"black"},[i("price-format",{attrs:{price:t.orderDetail.goods_price}})],1)],1),i("v-uni-view",{staticClass:"row-between"},[i("v-uni-view",[t._v("运费")]),i("v-uni-view",{staticClass:"black"},[t._v("+"),i("price-format",{attrs:{price:t.orderDetail.shipping_price}})],1)],1),0!=t.orderDetail.discount_amount?i("v-uni-view",{staticClass:"row-between"},[i("v-uni-view",[t._v("优惠券")]),i("v-uni-view",{staticClass:"primary"},[t._v("-"),i("price-format",{attrs:{price:t.orderDetail.discount_amount}})],1)],1):t._e(),i("v-uni-view",{staticClass:"row-end"},[i("v-uni-view",{staticClass:"lighter"},[t._v("实付金额：")]),i("v-uni-view",{staticClass:"primary xl"},[i("price-format",{attrs:{"first-size":34,"second-size":34,price:t.orderDetail.order_amount}})],1)],1)],1),i("v-uni-view",{staticClass:"order-info contain"},[i("v-uni-view",{staticClass:"item row",staticStyle:{"align-items":"flex-start"}},[i("v-uni-view",{staticClass:"title"},[t._v("买家留言")]),i("v-uni-view",{staticClass:"black"},[t._v(t._s(t.orderDetail.user_remark||"无"))])],1)],1),i("v-uni-view",{staticClass:"order-info contain"},[i("v-uni-view",{staticClass:"item row"},[i("v-uni-view",{staticClass:"title"},[t._v("订单编号")]),i("v-uni-view",{staticClass:"black"},[t._v(t._s(t.orderDetail.order_sn))])],1),i("v-uni-view",{staticClass:"item row"},[i("v-uni-view",{staticClass:"title"},[t._v("支付方式")]),i("v-uni-view",{staticClass:"black"},[t._v(t._s(t.orderDetail.pay_way_text))])],1),i("v-uni-view",{staticClass:"item row"},[i("v-uni-view",{staticClass:"title"},[t._v("下单时间")]),i("v-uni-view",{staticClass:"black"},[t._v(t._s(t.orderDetail.create_time))])],1),t.orderDetail.pay_time?i("v-uni-view",{staticClass:"item row"},[i("v-uni-view",{staticClass:"title"},[t._v("付款时间")]),i("v-uni-view",{staticClass:"black"},[t._v(t._s(t.orderDetail.pay_time))])],1):t._e(),t.orderDetail.shipping_time?i("v-uni-view",{staticClass:"item row"},[i("v-uni-view",{staticClass:"title"},[t._v("发货时间")]),i("v-uni-view",{staticClass:"black"},[t._v(t._s(t.orderDetail.shipping_time))])],1):t._e(),t.orderDetail.confirm_take_time?i("v-uni-view",{staticClass:"item row"},[i("v-uni-view",{staticClass:"title"},[t._v("成交时间")]),i("v-uni-view",{staticClass:"black"},[t._v(t._s(t.orderDetail.confirm_take_time))])],1):t._e(),t.orderDetail.cancel_time?i("v-uni-view",{staticClass:"item row"},[i("v-uni-view",{staticClass:"title"},[t._v("关闭时间")]),i("v-uni-view",{staticClass:"black"},[t._v(t._s(t.orderDetail.cancel_time))])],1):t._e()],1),t.orderDetail.cancel_btn||t.orderDetail.delivery_btn||t.orderDetail.take_btn||t.orderDetail.del_btn||t.orderDetail.pay_btn?i("v-uni-view",{staticClass:"footer bg-white row fixed"},[i("v-uni-view",{staticStyle:{flex:"1"}}),t.orderDetail.cancel_btn?i("v-uni-view",[i("v-uni-button",{staticClass:"plain br60",attrs:{size:"sm","hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelOrder.apply(void 0,arguments)}}},[t._v("取消订单")])],1):t._e(),t.orderDetail.delivery_btn?i("v-uni-navigator",{attrs:{"hover-class":"none",url:"/pages/goods_logistics/goods_logistics?id="+t.orderDetail.id}},[i("v-uni-button",{staticClass:"plain br60",attrs:{size:"sm","hover-class":"none"}},[t._v("查看物流")])],1):t._e(),t.orderDetail.take_btn?i("v-uni-view",{staticClass:"ml20"},[i("v-uni-button",{staticClass:"plain br60 primary red",attrs:{size:"sm","hover-class":"none"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.comfirmOrder.apply(void 0,arguments)}}},[t._v("确认收货")])],1):t._e(),t.orderDetail.del_btn?i("v-uni-view",[i("v-uni-button",{staticClass:"plain br60",attrs:{size:"sm","hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delOrder.apply(void 0,arguments)}}},[t._v("删除订单")])],1):t._e(),t.orderDetail.pay_btn?i("v-uni-view",{staticClass:"ml20"},[i("v-uni-button",{staticClass:"bg-primary br60 white",attrs:{size:"sm"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payNow.apply(void 0,arguments)}}},[t._v("立即付款")])],1):t._e()],1):t._e()],1)],1),t.isFirstLoading?i("loading-view"):t._e(),i("order-dialog",{ref:"orderDialog",attrs:{orderId:t.orderDetail.id,type:t.type},on:{refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)}}})],1)},s=[]},ff44:function(t,e,i){"use strict";i("caad"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("6355"),r=i("20f1"),s=i("af69"),n={data:function(){return{orderDetail:{},isFirstLoading:!0,type:0,cancelTime:0,showCancel:""}},components:{},props:{},onLoad:function(t){this.id=t.id,this.getOrderDetailFun()},methods:{onRefresh:function(){uni.$emit("refreshorder");var t=this.type;[0,2].includes(t)?this.getOrderDetailFun():1==t&&setTimeout((function(){uni.navigateBack()}),2e3)},orderDialog:function(){this.$refs.orderDialog.open()},delOrder:function(){var t=this;this.type=1,this.$nextTick((function(){t.orderDialog()}))},comfirmOrder:function(){var t=this;this.type=2,this.$nextTick((function(){t.orderDialog()}))},cancelOrder:function(){var t=this;this.type=0,this.$nextTick((function(){t.orderDialog()}))},payNow:function(t){var e=this;this.toast=Toast.loading({duration:0,forbidClick:!0,message:"请稍等..."}),(0,r.prepay)({from:"order",order_id:this.id}).then((function(t){if(Toast.clear(),1==t.code){var i=t.data;(0,s.wxpay)(i).then((function(){Tips({title:"支付成功"}),e.getOrderDetailFun(),event.emit("RESET_LIST")})).catch((function(){}))}}))},getOrderDetailFun:function(){var t=this;(0,a.getOrderDetail)(this.id).then((function(e){if(1==e.code){e.data.order_cancel_time,Date.now();t.orderDetail=e.data,t.$nextTick((function(){t.isFirstLoading=!1}))}}))}}};e.default=n}}]);